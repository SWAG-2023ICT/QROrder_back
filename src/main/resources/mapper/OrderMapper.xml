<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="swag.qrorder.mapper.OrderMapper">

    <insert id="addOrder" parameterType="Order" useGeneratedKeys="true" keyProperty="orderId">
        INSERT INTO `order` (order_dtm, total_price, seat_id, session_id)
        VALUE ( now(),#{totalPrice},#{seatId},#{sessionId} )
    </insert>

    <insert id="addOrderList" parameterType="List">
        INSERT INTO `order_list` (item_id, order_id, amount)
        VALUES
        <foreach collection="orderDetails" item="order" separator=",">
            ( #{order.itemId},#{order.orderId},#{order.amount} )
        </foreach>
    </insert>

    <insert id="addSelectedOption" parameterType="List">
        INSERT INTO `selected_option` (option_value_id)
        VALUES
        <foreach collection="orderDetails" item="order" separator=",">
            ( #{order.optionValueId} )
        </foreach>
    </insert>


</mapper>